(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports={root:"ZoneItem_root__PTX7t",info:"ZoneItem_info__YfcIV",name:"ZoneItem_name__2ZRbv",place:"ZoneItem_place__3buEL",parkingBtn:"ZoneItem_parkingBtn__33clR",deleteOverlay:"ZoneItem_deleteOverlay__2Zwgm",utilButton:"ZoneItem_utilButton__3t_iU"}},20:function(e,t,a){e.exports={root:"NewZoneItem_root__2xIfN",inputField:"NewZoneItem_inputField__1ggVA",actions:"NewZoneItem_actions__j0YxB"}},30:function(e,t,a){e.exports={root:"FilesToolbar_root__1UoDA",fileInput:"FilesToolbar_fileInput__1H8CR",button:"FilesToolbar_button__3befd"}},31:function(e,t,a){e.exports={container:"Container_container__Y-eHj",warningMessageWrapper:"Container_warningMessageWrapper__1c6-W",warningMessage:"Container_warningMessage__35Ssh"}},44:function(e,t,a){e.exports={licenseCode:"CarInfo_licenseCode__1U5dA",licenseCodeInput:"CarInfo_licenseCodeInput__1VNYN"}},45:function(e,t,a){e.exports={root:"App_root__14Hv_",header:"App_header__2opWd",helpMessage:"App_helpMessage__2F3W6"}},61:function(e,t,a){e.exports={root:"CreateNewZoneBtn_root__VChuZ"}},66:function(e,t,a){e.exports=a(85)},71:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(7),r=a.n(o),l=(a(71),a(16)),i=a(21),s=a(12),u=function(e,t){var a=Object(n.useState)(function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.err(n),t}}),c=Object(s.a)(a,2),o=c[0],r=c[1];return[o,function(t){try{var a=t instanceof Function?t(o):t;r(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.err(n)}}]},m="car",d="zones",f={licenseCode:""},b=function(){var e=u(m,f),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(l.a)({},a,{setCarData:n})},v=[],C=function(){var e=u(d,v),t=Object(s.a)(e,2),a=t[0],n=t[1];return{zones:a,setZones:n,createZone:function(e){var t=(new Date).getTime(),c=Object(l.a)({},e,{id:t}),o=Object(l.a)({},a,Object(i.a)({},t,c));return n(o),o},setZoneById:function(e,t){var c=Object(l.a)({},a);c[e]=Object(l.a)({},c[e],{data:t}),n(c)},deleteZone:function(e){var t=Object(l.a)({},a);delete t[e],n(t)}}},p=Object(n.createContext)({}),_=function(e){var t=e.children,a=b(),o=a.licenseCode,r=a.setCarData,s=C(),u=s||{},f=u.zones,v=u.setZones,_=Object(n.useCallback)(function(){var e;return e={},Object(i.a)(e,m,{licenseCode:o}),Object(i.a)(e,d,f),e},[o,f]),j=Object(n.useCallback)(function(e){if(e){var t=e[m]||{},a=e[d];t&&r(t),a&&v(a)}},[r,v]);return c.a.createElement(p.Provider,{value:Object(l.a)({licenseCode:o,setCarData:r},s,{setData:j,getData:_})},t)},j=a(112),O=a(59),E=a.n(O),g=a(60),h=a.n(g),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json";if(!e||!e.type.match(t))return Promise.reject();var a=new FileReader,n=new Promise(function(e,t){a.onload=function(a){var n=(a.target||{}).result,c=void 0===n?"":n;try{var o=JSON.parse(c);e(o)}catch(r){t()}}});return a.readAsText(e),n},k=function(e,t){var a=(e||{}).target;if(!a)return Promise.reject();var n=a.files||[],c=Object(s.a)(n,1)[0];return c?w(c,t):Promise.reject()},N=function(e,t){var a=new Blob([e],{type:"application/json;charset=utf-8"});!function(e,t){var a=document.createElement("a");document.body.appendChild(a),a.style="display: none",a.href=e,a.download=t,a.click(),window.URL.revokeObjectURL(e)}(URL.createObjectURL(a),t)},I=function(){return{isFileAPISupported:window.File&&window.FileReader&&window.FileList&&window.Blob,saveFile:N,loadFile:k,readJSONFromFile:w}},Z=a(30),y=a.n(Z),S=function(){return"sms-parking-data.json"},F=function(){var e=I(),t=e.isFileAPISupported,a=e.saveFile,o=e.loadFile,r=Object(n.useContext)(p),l=r.getData,i=r.setData,s=Object(n.useRef)(null),u=Object(n.useCallback)(function(){var e=JSON.stringify(l()),t=S();a(e,t)},[l,a]),m=Object(n.useCallback)(function(){s&&s.current&&s.current.click()},[]),d=Object(n.useCallback)(function(e){console.log(e.target.files),o(e).then(function(e){return i(e)}).catch(function(e){return console.log(e)})},[o,i]);return t?c.a.createElement("div",{className:y.a.root},c.a.createElement("input",{type:"file",ref:s,className:y.a.fileInput,onChange:d}),c.a.createElement(j.a,{className:y.a.button,onClick:m},c.a.createElement(E.a,null)),c.a.createElement(j.a,{className:y.a.button,onClick:u},c.a.createElement(h.a,null))):null},B=a(114),x=a(117),T=a(115),D=a(20),R=a.n(D),M=function(e){return function(t){return e(t.target.value)}};function A(e){var t=e.onCreateZone,a=e.onCancel,o=Object(n.useState)(""),r=Object(s.a)(o,2),l=r[0],i=r[1],u=Object(n.useState)(""),m=Object(s.a)(u,2),d=m[0],f=m[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),C=v[0],p=v[1],_=Object(n.useCallback)(function(){t({name:l,address:d,zoneId:C})},[t,l,d,C]),j={root:R.a.root};return c.a.createElement(B.a,{classes:j},c.a.createElement(x.a,{label:"\u0418\u043c\u044f \u043c\u0435\u0441\u0442\u0430",value:l,className:R.a.inputField,onChange:M(i)}),c.a.createElement(x.a,{label:"\u0410\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u0430",value:d,className:R.a.inputField,onChange:M(f)}),c.a.createElement(x.a,{required:!0,label:"\u041d\u043e\u043c\u0435\u0440 \u0437\u043e\u043d\u044b",value:C,className:R.a.inputField,onChange:M(p)}),c.a.createElement("div",{className:R.a.actions},c.a.createElement(T.a,{className:R.a.utilButton,onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement(T.a,{className:R.a.utilButton,variant:"contained",color:"primary",onClick:_},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1300,a=Object(n.useRef)(null),c=Object(n.useCallback)(function(n){a.current=setTimeout(function(){return e(n)},t)},[e,t]),o=Object(n.useCallback)(function(){clearTimeout(a.current)},[]);return{onMouseDown:c,onMouseUp:o,onTouchStart:c,onTouchEnd:o}},U=a(17),z=a.n(U);var W=function(e){var t=e.zoneId,a=e.licenseCode,n=encodeURI("".concat(t,"*").concat(a,"*1"));return"sms://".concat("7757","/?body=").concat(n)},J=function(e){var t=e.id,a=e.zoneId,o=e.name,r=e.address,l=e.licenseCode,i=e.onDelete,u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],f=m[1],b=P(function(e){f(!0)}),v=b.onTouchStart,C=b.onTouchEnd,p=Object(n.useCallback)(function(){f(!1)},[f]),_=Object(n.useCallback)(function(){f(!1),i(t)},[t,i]),j=W({zoneId:a,licenseCode:l}),O={root:z.a.root},E="".concat(r," (\u0417\u043e\u043d\u0430 ").concat(a,")");return c.a.createElement(B.a,{classes:O,onTouchEnd:C,onTouchStart:v},c.a.createElement("div",{className:z.a.info},c.a.createElement("div",{className:z.a.name},o),c.a.createElement("div",{className:z.a.place},E)),c.a.createElement("a",{href:j},c.a.createElement("button",{className:z.a.parkingBtn},"P")),d&&c.a.createElement("div",{className:z.a.deleteOverlay},c.a.createElement(T.a,{className:z.a.utilButton,onClick:p},"\u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement(T.a,{className:z.a.utilButton,color:"secondary",onClick:_},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},L=function(){var e=Object(n.useContext)(p),t=e.zones,a=e.deleteZone,o=e.licenseCode,r=Object.values(t).sort(function(e,t){return e.id-t.id});return c.a.createElement("div",null,r.map(function(e,t){return c.a.createElement(J,Object.assign({key:t,licenseCode:o,onDelete:a},e))}))},V=a(116),Y=a(62),H=a.n(Y),q=a(61),X=a.n(q),$=function(e){var t=e.className,a=e.onClick,n={primary:t};return c.a.createElement("div",{className:X.a.root},c.a.createElement(V.a,{color:"primary",onClick:a,classes:n},c.a.createElement(H.a,null)))},G=a(31),K=a.n(G),Q=function(){var e=Object(n.useContext)(p),t=e.createZone,a=e.licenseCode,o=Object(n.useState)(!0),r=Object(s.a)(o,2),l=r[0],i=r[1],u=Object(n.useCallback)(function(){i(!1)},[i]),m=Object(n.useCallback)(function(e){t(e),i(!0)},[t,i]);if(!a)return c.a.createElement("div",{className:K.a.warningMessageWrapper},c.a.createElement("p",{className:K.a.warningMessage},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0441. \u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443"));var d=l?c.a.createElement($,{className:K.a.showNewZoneBtn,onClick:u}):c.a.createElement(A,{onCreateZone:m});return c.a.createElement("div",{className:K.a.container},c.a.createElement(L,null),d)},ee=a(63),te=a.n(ee),ae=a(64),ne=a.n(ae),ce=a(44),oe=a.n(ce),re=function(e){var t=e.licenseCode,a=e.onSave,o=Object(n.useState)(t||""),r=Object(s.a)(o,2),l=r[0],i=r[1],u=Object(n.useCallback)(function(e){var t=e.target;t&&i(t.value)},[i]),m=Object(n.useCallback)(function(){a(l)},[a,l]),d=ne()(oe.a.licenseCode,oe.a.licenseCodeInput);return c.a.createElement(te.a,{mask:"c999cc999",formatChars:{9:"[0-9]",c:"[\u0430\u0432\u0435\u043a\u043c\u043d\u043e\u0440\u0441\u0442\u0443\u0445]"},maskChar:"",value:l,onChange:u,onBlur:m,className:d,placeholder:"\u0413\u041e\u0421\u041d\u041e\u041c\u0415\u0420"})},le=function(){var e=Object(n.useContext)(p),t=e.name,a=e.licenseCode,o=e.setCarData,r=Object(n.useState)(!a),l=Object(s.a)(r,2),i=l[0],u=l[1],m=Object(n.useCallback)(function(){u(!0)},[u]),d=Object(n.useCallback)(function(e){u(!1),o({name:t,licenseCode:e})},[t,o,u]);return c.a.createElement("div",null,t,i?c.a.createElement(re,{licenseCode:a,onSave:d}):c.a.createElement("div",{onClick:m,className:oe.a.licenseCode},a))},ie=a(45),se=a.n(ie),ue=function(){return c.a.createElement("div",{className:se.a.root},c.a.createElement(_,null,c.a.createElement("div",{className:se.a.header},c.a.createElement(le,null),c.a.createElement(F,null)),c.a.createElement(Q,null),c.a.createElement("div",{className:se.a.helpMessage},"\u0417\u0430\u0431\u043b\u0443\u0434\u0438\u043b\u0438\u0441\u044c? \u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043a\u0430\u0440\u0442\u0443 \u043d\u0430\xa0",c.a.createElement("a",{href:"https://parking.mos.ru/",tatget:"_blank",rel:"noopener norefferer"},"\u0441\u0430\u0439\u0442\u0435 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u041f\u0430\u0440\u043a\u0438\u043d\u0433\u0430"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[66,1,2]]]);
//# sourceMappingURL=main.c932ed9d.chunk.js.map